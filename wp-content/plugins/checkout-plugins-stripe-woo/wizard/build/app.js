!function(){"use strict";var e={n:function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,{a:n}),n},d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=window.wp.element,n=window.React,r=e.n(n),a=window.ReactDOM,o=e.n(a);function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}var l,c=l||(l={});c.Pop="POP",c.Push="PUSH",c.Replace="REPLACE";function i(e){e.preventDefault(),e.returnValue=""}function u(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function m(e){var t={};if(e){var n=e.indexOf("#");0<=n&&(t.hash=e.substr(n),e=e.substr(0,n)),0<=(n=e.indexOf("?"))&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function p(e,t){if(!e)throw new Error(t)}const d=(0,n.createContext)(null),f=(0,n.createContext)(null),g=(0,n.createContext)({outlet:null,matches:[]});function b(e){let{basename:t="/",children:r=null,location:a,navigationType:o=l.Pop,navigator:s,static:c=!1}=e;h()&&p(!1);let i=y(t),u=(0,n.useMemo)((()=>({basename:i,navigator:s,static:c})),[i,s,c]);"string"==typeof a&&(a=m(a));let{pathname:g="/",search:b="",hash:x="",state:v=null,key:w="default"}=a,E=(0,n.useMemo)((()=>{let e=function(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}(g,i);return null==e?null:{pathname:e,search:b,hash:x,state:v,key:w}}),[i,g,b,x,v,w]);return null==E?null:(0,n.createElement)(d.Provider,{value:u},(0,n.createElement)(f.Provider,{children:r,value:{location:E,navigationType:o}}))}function h(){return null!=(0,n.useContext)(f)}function x(){return h()||p(!1),(0,n.useContext)(f).location}function v(){h()||p(!1);let{basename:e,navigator:t}=(0,n.useContext)(d),{matches:r}=(0,n.useContext)(g),{pathname:a}=x(),o=JSON.stringify(r.map((e=>e.pathnameBase))),s=(0,n.useRef)(!1);return(0,n.useEffect)((()=>{s.current=!0})),(0,n.useCallback)((function(n,r){if(void 0===r&&(r={}),!s.current)return;if("number"==typeof n)return void t.go(n);let l=function(e,t,n){let r,a="string"==typeof e?m(e):e,o=""===e||""===a.pathname?"/":a.pathname;if(null==o)r=n;else{let e=t.length-1;if(o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}r=e>=0?t[e]:"/"}let s=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:a=""}="string"==typeof e?m(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:E(r),hash:_(a)}}(a,r);return o&&"/"!==o&&o.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}(n,JSON.parse(o),a);"/"!==e&&(l.pathname=w([e,l.pathname])),(r.replace?t.replace:t.push)(l,r.state)}),[e,t,o,a])}const w=e=>e.join("/").replace(/\/\/+/g,"/"),y=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),E=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",_=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var k=window.wp.i18n,N=function(){return(0,t.createElement)("svg",{className:"animate-spin ml-2 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},(0,t.createElement)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.createElement)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"}))};const S=(0,n.createContext)(),C=()=>(0,n.useContext)(S);var P,j,T,O=function(){const[e,r]=(0,n.useState)(!1),[{},a]=C(),o=v();return(0,n.useEffect)((()=>{a({type:"BLOCKED"})}),[]),(0,t.createElement)("main",{className:"pb-28 mb-[70px] mt-24 mx-auto md:w-7/12 sm:w-10/12 w-full px-4 sm:px-6 lg:mt-32 lg:px-8 flex-1"},(0,t.createElement)("div",{className:"text-center"},(0,t.createElement)("span",{className:"text-sm font-medium text-primary-100 text-center block tracking-[.24em] uppercase"},(0,k.__)("Step 1 of 5","checkout-plugins-stripe-woo")),(0,t.createElement)("h1",{className:" mt-8 lg:mt-10 text-2xl font-semibold text-[#020617] sm:text-3xl md:text-4xl"},(0,k.__)("Let's Connect with Stripe!","checkout-plugins-stripe-woo")),(0,t.createElement)("p",{className:"mt-6 text-base justify-center text-[#475569] sm:mt-5 sm:text-base sm:w-full sm:mx-auto md:mt-5 lg:mx-0"},(0,k.__)("Checkout Plugins highly recommends using Stripe Connect, one-click onboarding solution offered by Stripe.","checkout-plugins-stripe-woo")),(0,t.createElement)("div",{className:"mt-5 sm:mt-10 sm:inline-block lg:inline-block sm:justify-center lg:justify-center"},(0,t.createElement)("div",{className:"rounded-md shadow"},e?(0,t.createElement)("button",{className:"disabled w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-normal rounded-md text-white bg-primary-100 hover:bg-cart-700 cursor-wait"},(0,k.__)("Connectingâ€¦","checkout-plugins-stripe-woo"),(0,t.createElement)(N,null)):(0,t.createElement)("button",{onClick:function(){r(!0),""===onboarding_vars.woocommerce_installed||""===onboarding_vars.woocommerce_activated?o(onboarding_vars.navigator_base+"&cpsw_call=setup-woocommerce"):window.location.href=onboarding_vars.authorization_url},className:"w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-normal rounded-md text-white bg-primary-100 hover:bg-cart-700 cursor-pointer"},(0,k.__)("Connect with Stripe","checkout-plugins-stripe-woo"))))))};function D(){return D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D.apply(this,arguments)}function L(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function B(e,t){if(e in t){for(var n=t[e],r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];return"function"==typeof n?n.apply(void 0,a):n}var s=new Error('Tried to handle "'+e+'" but there is no handler defined. Only defined handlers are: '+Object.keys(t).map((function(e){return'"'+e+'"'})).join(", ")+".");throw Error.captureStackTrace&&Error.captureStackTrace(s,B),s}function F(e){var t=e.props,n=e.slot,r=e.defaultTag,a=e.features,o=e.visible,s=void 0===o||o,l=e.name;if(s)return R(t,n,r,l);var c=null!=a?a:P.None;if(c&P.Static){var i=t.static,u=void 0!==i&&i,m=L(t,["static"]);if(u)return R(m,n,r,l)}if(c&P.RenderStrategy){var p,d=t.unmount,f=void 0===d||d,g=L(t,["unmount"]);return B(f?j.Unmount:j.Hidden,((p={})[j.Unmount]=function(){return null},p[j.Hidden]=function(){return R(D({},g,{hidden:!0,style:{display:"none"}}),n,r,l)},p))}return R(t,n,r,l)}function R(e,t,r,a){var o;void 0===t&&(t={});var s=U(e,["unmount","static"]),l=s.as,c=void 0===l?r:l,i=s.children,u=s.refName,m=void 0===u?"ref":u,p=L(s,["as","children","refName"]),d=void 0!==e.ref?((o={})[m]=e.ref,o):{},f="function"==typeof i?i(t):i;if(p.className&&"function"==typeof p.className&&(p.className=p.className(t)),c===n.Fragment&&Object.keys(p).length>0){if(!(0,n.isValidElement)(f)||Array.isArray(f)&&f.length>1)throw new Error(['Passing props on "Fragment"!',"","The current component <"+a+' /> is rendering a "Fragment".',"However we need to passthrough the following props:",Object.keys(p).map((function(e){return"  - "+e})).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map((function(e){return"  - "+e})).join("\n")].join("\n"));return(0,n.cloneElement)(f,Object.assign({},function(e,t,n){for(var r,a=Object.assign({},e),o=function(){var n,o=r.value;void 0!==e[o]&&void 0!==t[o]&&Object.assign(a,((n={})[o]=function(n){n.defaultPrevented||e[o](n),n.defaultPrevented||t[o](n)},n))},s=I(["onClick"]);!(r=s()).done;)o();return a}(function(e){var t=Object.assign({},e);for(var n in t)void 0===t[n]&&delete t[n];return t}(U(p,["ref"])),f.props),d))}return(0,n.createElement)(c,Object.assign({},U(p,["ref"]),c!==n.Fragment&&d),f)}function M(e){var t;return Object.assign((0,n.forwardRef)(e),{displayName:null!=(t=e.displayName)?t:e.name})}function U(e,t){void 0===t&&(t=[]);for(var n,r=Object.assign({},e),a=I(t);!(n=a()).done;){var o=n.value;o in r&&delete r[o]}return r}function H(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=(0,n.useRef)(t);return(0,n.useEffect)((function(){a.current=t}),[t]),(0,n.useCallback)((function(e){for(var t,n=I(a.current);!(t=n()).done;){var r=t.value;null!=r&&("function"==typeof r?r(e):r.current=e)}}),[a])}function W(e){for(var t,n,r=e.parentElement,a=null;r&&!(r instanceof HTMLFieldSetElement);)r instanceof HTMLLegendElement&&(a=r),r=r.parentElement;var o=null!=(t=""===(null==(n=r)?void 0:n.getAttribute("disabled")))&&t;return(!o||!function(e){if(!e)return!1;for(var t=e.previousElementSibling;null!==t;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}(a))&&o}!function(e){e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static"}(P||(P={})),function(e){e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden"}(j||(j={})),function(e){e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab"}(T||(T={}));var z="undefined"!=typeof window?n.useLayoutEffect:n.useEffect,$={serverHandoffComplete:!1},G=0;function Y(){return++G}function K(){var e=function(){var e=(0,n.useState)($.serverHandoffComplete),t=e[0],r=e[1];return(0,n.useEffect)((function(){!0!==t&&r(!0)}),[t]),(0,n.useEffect)((function(){!1===$.serverHandoffComplete&&($.serverHandoffComplete=!0)}),[]),t}(),t=(0,n.useState)(e?Y:null),r=t[0],a=t[1];return z((function(){null===r&&a(Y())}),[r]),null!=r?""+r:void 0}var q=(0,n.createContext)(null);function J(){var e=(0,n.useContext)(q);if(null===e){var t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,J),t}return e}function V(e){var t;if(e.type)return e.type;var n=null!=(t=e.as)?t:"button";return"string"==typeof n&&"button"===n.toLowerCase()?"button":void 0}function Q(e,t){var r=(0,n.useState)((function(){return V(e)})),a=r[0],o=r[1];return z((function(){o(V(e))}),[e.type,e.as]),z((function(){a||t.current&&t.current instanceof HTMLButtonElement&&!t.current.hasAttribute("type")&&o("button")}),[a,t]),a}var X=(0,n.createContext)(null);function Z(){var e=(0,n.useContext)(X);if(null===e){var t=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Z),t}return e}var ee=(0,n.createContext)(null);ee.displayName="GroupContext";var te=n.Fragment;function ne(e){var t=e.checked,r=e.onChange,a=L(e,["checked","onChange"]),o="headlessui-switch-"+K(),s=(0,n.useContext)(ee),l=(0,n.useRef)(null),c=H(l,null===s?null:s.setSwitch),i=(0,n.useCallback)((function(){return r(!t)}),[r,t]),u=(0,n.useCallback)((function(e){if(W(e.currentTarget))return e.preventDefault();e.preventDefault(),i()}),[i]),m=(0,n.useCallback)((function(e){e.key!==T.Tab&&e.preventDefault(),e.key===T.Space&&i()}),[i]),p=(0,n.useCallback)((function(e){return e.preventDefault()}),[]),d=(0,n.useMemo)((function(){return{checked:t}}),[t]);return F({props:D({},a,{id:o,ref:c,role:"switch",type:Q(e,l),tabIndex:0,"aria-checked":t,"aria-labelledby":null==s?void 0:s.labelledby,"aria-describedby":null==s?void 0:s.describedby,onClick:u,onKeyUp:m,onKeyPress:p}),slot:d,defaultTag:"button",name:"Switch"})}ne.Group=function(e){var t=(0,n.useState)(null),a=t[0],o=t[1],s=function(){var e=(0,n.useState)([]),t=e[0],a=e[1];return[t.length>0?t.join(" "):void 0,(0,n.useMemo)((function(){return function(e){var t=(0,n.useCallback)((function(e){return a((function(t){return[].concat(t,[e])})),function(){return a((function(t){var n=t.slice(),r=n.indexOf(e);return-1!==r&&n.splice(r,1),n}))}}),[]),o=(0,n.useMemo)((function(){return{register:t,slot:e.slot,name:e.name,props:e.props}}),[t,e.slot,e.name,e.props]);return r().createElement(X.Provider,{value:o},e.children)}}),[a])]}(),l=s[0],c=s[1],i=function(){var e=(0,n.useState)([]),t=e[0],a=e[1];return[t.length>0?t.join(" "):void 0,(0,n.useMemo)((function(){return function(e){var t=(0,n.useCallback)((function(e){return a((function(t){return[].concat(t,[e])})),function(){return a((function(t){var n=t.slice(),r=n.indexOf(e);return-1!==r&&n.splice(r,1),n}))}}),[]),o=(0,n.useMemo)((function(){return{register:t,slot:e.slot,name:e.name,props:e.props}}),[t,e.slot,e.name,e.props]);return r().createElement(q.Provider,{value:o},e.children)}}),[a])]}(),u=i[0],m=i[1],p=(0,n.useMemo)((function(){return{switch:a,setSwitch:o,labelledby:l,describedby:u}}),[a,o,l,u]);return r().createElement(m,{name:"Switch.Description"},r().createElement(c,{name:"Switch.Label",props:{onClick:function(){a&&(a.click(),a.focus({preventScroll:!0}))}}},r().createElement(ee.Provider,{value:p},F({props:e,defaultTag:te,name:"Switch.Group"}))))},ne.Label=function(e){var t=e.passive,n=void 0!==t&&t,r=L(e,["passive"]),a=Z(),o="headlessui-label-"+K();z((function(){return a.register(o)}),[o,a.register]);var s=D({},a.props,{id:o}),l=D({},r,s);return n&&delete l.onClick,F({props:l,slot:a.slot||{},defaultTag:"label",name:a.name||"Label"})},ne.Description=function(e){var t=J(),n="headlessui-description-"+K();z((function(){return t.register(n)}),[n,t.register]);var r=e,a=D({},t.props,{id:n});return F({props:D({},r,a),slot:t.slot||{},defaultTag:"p",name:t.name||"Description"})};var re=window.wp.apiFetch,ae=e.n(re);function oe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}var se=function(){const[{},e]=C(),[r,a]=(0,n.useState)(!1),[o,s]=(0,n.useState)(onboarding_vars.available_gateways),l=v();return(0,t.createElement)("main",{className:"pb-28 mt-24 mx-auto md:w-7/12 sm:w-10/12 w-full px-4 sm:px-6 lg:mt-32 lg:px-8 flex-1"},(0,t.createElement)("div",{className:"text-center"},(0,t.createElement)("span",{className:"text-sm font-medium text-primary-100 text-center block tracking-[.24em] uppercase"},(0,k.__)("Step 3 of 5","checkout-plugins-stripe-woo")),(0,t.createElement)("h1",{className:"mt-8 lg:mt-10 text-2xl font-semibold text-[#020617] sm:text-3xl md:text-4xl"},(0,t.createElement)("span",{className:"flex justify-center items-center"},(0,k.__)("Congratulations!","checkout-plugins-stripe-woo")),(0,k.__)("You have successfully connected to Stripe.","checkout-plugins-stripe-woo")),(0,t.createElement)("p",{className:"mt-6 text-base justify-center text-primary-200 sm:mt-5 sm:w-full sm:mx-auto md:mt-5 lg:mx-0"},(0,k.__)("Let's activate the gateways.","checkout-plugins-stripe-woo")),(0,t.createElement)("ul",{role:"list",className:"overflow-hidden sm:rounded-md mt-10 max-w-screen-md mx-auto"},null==o?void 0:o.map((e=>(0,t.createElement)("li",{key:e.id},(0,t.createElement)("span",{href:"#",className:"block hover:bg-gray-50 bg-white mb-4 border border-[#E2E8F0] shadow-custom-drop rounded-lg"},(0,t.createElement)("div",{className:"flex items-center px-4 py-4"},(0,t.createElement)("div",{className:"min-w-0 flex-1 flex items-center"},(0,t.createElement)("div",{className:"flex-shrink-0"},(0,t.createElement)("img",{className:"h-8 w-16 max-w-80",src:e.icon,alt:e.name})),(0,t.createElement)("div",{className:"min-w-0 flex-1 px-4 md:gap-4"},(0,t.createElement)("div",null,(0,t.createElement)("p",{className:"text-lg font-medium text-primary-cardtitle flex truncate"},e.name," ",e.recommended?(0,t.createElement)("span",{className:"h-max self-end ml-2 px-2 py-0 text-[#16A34A] text-xs font-medium bg-[#F0FDF4] rounded-[4px] border border-[#BBF7D0]"},(0,k.__)("Recommended","checkout-plugins-stripe-woo")):""),(0,t.createElement)("p",{className:"text-sm text-primary-mutedtext flex"},(0,t.createElement)("span",{className:"text-left text-sm"},"all"===e.currencies?(0,k.__)("Supports all currencies","checkout-plugins-stripe-woo"):(0,k.__)("Supports ","checkout-plugins-stripe-woo")+e.currencies))))),(0,t.createElement)("div",null,(0,t.createElement)(ne,{checked:e.enabled,value:e.enabled,name:e.id,onChange:()=>{e.enabled=!e.enabled,s([...o])},className:oe(e.enabled?"bg-cart-500 ":"bg-gray-200","relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cart-500")},(0,t.createElement)("span",{className:"sr-only"},e.id),(0,t.createElement)("span",{"aria-hidden":"true",className:oe(e.enabled?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200")}))))))))),(0,t.createElement)("div",{className:"mt-5 sm:mt-8 sm:inline-block lg:inline-block sm:justify-center lg:justify-center"},(0,t.createElement)("div",{className:"rounded-md shadow"},r?(0,t.createElement)("button",{className:"disabled w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-normal rounded-md text-white bg-primary-100 hover:bg-cart-700 cursor-wait"},(0,k.__)("Activatingâ€¦","checkout-plugins-stripe-woo"),(0,t.createElement)(N,null)):(0,t.createElement)("button",{onClick:function(t){t.preventDefault(),e({type:"PROCESSING"}),a(!0);const n=new window.FormData,r={};o.forEach((function(e){var t;r[e.id]=null===(t=document.getElementsByName(e.id)[0])||void 0===t?void 0:t.value}));const s=JSON.stringify(r);n.append("formdata",s),n.append("action","cpsw_onboarding_enable_gateway"),n.append("security",onboarding_vars.cpsw_onboarding_enable_gateway),ae()({url:onboarding_vars.ajax_url,method:"POST",body:n}).then((t=>{e({type:"RESET"}),t.success&&(e({type:"UPDATE_STEP",step:2,completed:!0}),l(onboarding_vars.navigator_base+"&cpsw_call=express-checkout"))}))},className:"w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-normal rounded-md text-white bg-primary-100 hover:bg-cart-700 cursor-pointer"},(0,k.__)("Activate Gateways","checkout-plugins-stripe-woo"))),(0,t.createElement)("div",{className:"mt-8"},(0,t.createElement)("a",{href:onboarding_vars.base_url+"&cpsw_call=express-checkout",className:"w-full text-center text-base font-normal text-primary-mutedtext"},(0,k.__)("Skip this step","checkout-plugins-stripe-woo"))))))},le=function(){var e;const[{},r]=C(),[a,o]=(0,n.useState)(!1),[s,l]=(0,n.useState)(!1),c=null===(e=onboarding_vars.available_gateways)||void 0===e?void 0:e.find((e=>"cpsw_stripe"===e.id)),i=v();return(0,n.useEffect)((()=>{c.enabled||l(!0)}),[]),(0,t.createElement)("main",{className:`pb-28 mt-24 mx-auto md:w-7/12 sm:w-10/12 w-full px-4 sm:px-6 lg:mt-32 lg:px-8 flex-1 ${s&&"pt-12"}`},(0,t.createElement)("div",{className:"text-center"},(0,t.createElement)("span",{className:"text-sm font-medium text-primary-100 text-center block tracking-[.24em] uppercase"},(0,k.__)("Step 4 of 5","checkout-plugins-stripe-woo")),(0,t.createElement)("h1",{className:"mt-8 lg:mt-10 text-2xl font-semibold text-[#020617] sm:text-3xl md:text-4xl"},(0,k.__)("One Last Step","checkout-plugins-stripe-woo")),(0,t.createElement)("p",{className:"mt-6 text-base justify-center text-primary-200 sm:mt-5 sm:w-full sm:mx-auto md:mt-5 lg:mx-0",dangerouslySetInnerHTML:{__html:(0,k.sprintf)(// Translators: This message recommends activating Express Checkout and Stripe Card Processing for better conversions.
(0,k.__)("For better conversions, we recommend activating %1$sExpress Checkout%2$s along with your new %1$sStripe Card Processing.%2$s","checkout-plugins-stripe-woo"),'<span class=" inline font-bold">',"</span>")}}),(0,t.createElement)("div",{className:"flex justify-center items-center gap-8 mx-auto mt-4"},(0,t.createElement)("img",{className:"my-3 h-7",src:onboarding_vars.assets_url+"images/apple-pay.svg",alt:"Apple pay"}),(0,t.createElement)("img",{className:"my-3 h-7",src:onboarding_vars.assets_url+"images/gpay.svg",alt:"Google pay"})),(0,t.createElement)("div",{className:"sm:inline-block lg:inline-block sm:justify-center lg:justify-center mt-8"},(0,t.createElement)("div",{className:"rounded-md shadow"},a?(0,t.createElement)("button",{className:"disabled w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-normal rounded-md text-white bg-primary-100 hover:bg-cart-700 cursor-wait"},(0,k.__)("Activatingâ€¦","checkout-plugins-stripe-woo"),(0,t.createElement)(N,null)):(0,t.createElement)("button",{onClick:function(){r({type:"PROCESSING"}),o(!0);const e=new window.FormData;e.append("action","cpsw_onboarding_enable_express_checkout"),e.append("security",onboarding_vars.cpsw_onboarding_enable_express_checkout),ae()({url:onboarding_vars.ajax_url,method:"POST",body:e}).then((e=>{r({type:"RESET"}),e.success&&(r({type:"UPDATE_STEP",step:3,completed:!0}),i(onboarding_vars.navigator_base+"&cpsw_call=thank-you"))}))},className:`${s&&" disabled pointer-events-none hover:bg-primary-100 cursor-default opacity-50 "} w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-normal rounded-md text-white bg-primary-100 hover:bg-cart-700 cursor-pointer`},(0,k.__)("Activate Express Checkout","checkout-plugins-stripe-woo"))),(0,t.createElement)("div",{className:"mt-8"},(0,t.createElement)("a",{href:onboarding_vars.base_url+"&cpsw_call=thank-you",className:"w-full text-center text-base font-normal text-primary-mutedtext"},(0,k.__)("Skip this step","checkout-plugins-stripe-woo"))))),s?(0,t.createElement)("div",{className:"bg-cart-50 p-4 fixed left-0 top-0 right-0 transition ease-in-out delay-150 mt-16"},(0,t.createElement)("div",{className:"block"},(0,t.createElement)("div",{className:"text-center justify-center"},(0,t.createElement)("p",{className:"text-sm mx-auto w-full text-primary-100 text-center"},(0,k.__)("To enable this feature, the Stripe Card Processing payment method must be enabled.","checkout-plugins-stripe-woo"),(0,t.createElement)("span",{onClick:()=>{var e;return i((null===(e=onboarding_vars)||void 0===e?void 0:e.navigator_base)+"&cpsw_call=success")},className:"font-medium cursor-pointer"},(0,k.__)(" Please enable it from the previous tab.","checkout-plugins-stripe-woo")))))):"")},ce=function(){return(0,t.createElement)("main",{className:"pb-28 mt-24 mx-auto md:w-7/12 w-full px-4 sm:px-6 lg:mt-32 lg:px-8 flex-1"},(0,t.createElement)("div",{className:"text-center"},(0,t.createElement)("img",{className:"block h-16 w-16 text-center mx-auto",src:onboarding_vars.assets_url+"images/failed.svg",alt:"connection Failed"}),(0,t.createElement)("h1",{className:"mt-10 text-2xl font-semibold text-[#020617] sm:text-3xl md:text-4xl"},(0,k.__)("Connection not Created","checkout-plugins-stripe-woo")),(0,t.createElement)("p",{className:"mt-6 text-base justify-center text-primary-200 sm:mt-5 sm:w-full sm:mx-auto md:mt-5 lg:mx-0"},(0,k.__)("There was an error while connection with Stripe.","checkout-plugins-stripe-woo"))),(0,t.createElement)("div",{className:"w-max text-center mt-8 mx-auto"},(0,t.createElement)("div",{className:"rounded-md shadow"},(0,t.createElement)("a",{href:onboarding_vars.authorization_url,className:"w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-normal rounded-md text-white bg-primary-100 hover:bg-cart-700 cursor-pointer"},(0,k.__)("Please Try Again.","checkout-plugins-stripe-woo"))),(0,t.createElement)("div",{className:"mt-4"},(0,t.createElement)("a",{href:onboarding_vars.manual_connect_url,className:"w-full text-center text-base font-normal text-primary-mutedtext"},(0,k.__)("Manage API keys manually","checkout-plugins-stripe-woo")))))};const ie=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=new window.FormData;return n.append("action","cpsw_onboarding_exit"),n.append("security",onboarding_vars.cpsw_onboarding_exit),n.append("current_step",e),n.append("completed",t?"true":"false"),ae()({url:onboarding_vars.ajax_url,method:"POST",body:n})};var ue,me,pe,de,fe=function(){const[e,r]=(0,n.useState)(!1),[{steps:a},o]=C();return(0,t.createElement)("main",{className:"pb-28 mt-24 mx-auto md:w-7/12 w-full px-4 sm:px-6 lg:mt-32 lg:px-8 flex-1"},(0,t.createElement)("div",{className:"text-center"},(0,t.createElement)("span",{className:"text-sm font-medium text-primary-100 text-center block tracking-[.24em] uppercase"},(0,k.__)("Step 5 of 5","checkout-plugins-stripe-woo")),(0,t.createElement)("h1",{className:"mt-8 lg:mt-10 text-2xl font-semibold text-[#020617] sm:text-3xl md:text-4xl"},(0,k.__)("Congratulations. You did it!","checkout-plugins-stripe-woo")),(0,t.createElement)("p",{className:"mt-6 text-base justify-center text-primary-200 sm:mt-5 sm:w-full sm:mx-auto md:mt-5 lg:mx-0"},(0,k.__)("Your store is all set to accept payments. We provide lots of customization options to match your needs, don't forget to explore them.","checkout-plugins-stripe-woo")),(0,t.createElement)("iframe",{className:"mx-auto mt-10 max-w-[645px] max-h-[400px] w-full h-full",src:"https://www.youtube.com/embed/CeI5cWJbhvA?si=YhArffU8txBm1jCd?showinfo=0&autoplay=0&mute=0&rel=0&privacy=1",title:(0,k.__)("Easy Express Checkout","checkout-plugins-stripe-woo"),allowFullScreen:!0}),(0,t.createElement)("div",{className:"mt-5 sm:mt-10 sm:inline-block lg:inline-block sm:justify-center lg:justify-center"},(0,t.createElement)("div",{className:"rounded-md shadow"},e?(0,t.createElement)("button",{className:"disabled w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-normal rounded-md text-white bg-primary-100 hover:bg-cart-700 cursor-wait"},(0,k.__)("Finishing setupâ€¦","checkout-plugins-stripe-woo"),(0,t.createElement)(N,null)):(0,t.createElement)("button",{onClick:function(){r(!0),o({type:"UPDATE_STEP",step:4,completed:!0});const e=a.find((e=>!1===e.completed)),t=e?e.title:null,n=a.every((e=>"thank-you"===e.title||e.completed));ie(t,n).then((e=>{e.success?window.location.href="payment"===onboarding_vars.get_element?onboarding_vars.settings_url:onboarding_vars.gateways_url:console.log("Error:",e.message)})).catch((e=>{console.error("Request failed:",e)}))},className:"w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-normal rounded-md text-white bg-primary-100 hover:bg-cart-700 cursor-pointer"},(0,k.__)("Finish Setup","checkout-plugins-stripe-woo"))))))},ge=function(){""!==onboarding_vars.woocommerce_installed&&""!==onboarding_vars.woocommerce_activated&&(window.location.href=onboarding_vars.navigator_base);const[e,r]=(0,n.useState)(""),[a,o]=(0,n.useState)(!1),[s,l]=(0,n.useState)(!1);return(0,t.createElement)("main",{className:`mt-24 mx-auto max-w-7xl px-4 sm:px-6 lg:mt-32 lg:px-8 ${(a||s)&&"pt-12"}`},(0,t.createElement)("div",{className:"text-center"},(0,t.createElement)("img",{className:"m-auto mb-10",src:onboarding_vars.assets_url+"images/cpsw-woo-warning.svg",alt:"Express Checkout"}),(0,t.createElement)("h1",{className:"text-2xl font-semibold text-[#020617] sm:text-3xl md:text-4xl"},""===onboarding_vars.woocommerce_installed?(0,k.__)("Missing ","checkout-plugins-stripe-woo"):(0,k.__)("Inactive ","checkout-plugins-stripe-woo"),(0,k.__)("WooCommerce","checkout-plugins-stripe-woo")),(0,t.createElement)("p",{className:"mt-6 text-base justify-center text-[#475569] sm:mt-5 sm:w-full sm:mx-auto md:mt-5 lg:mx-0"},(0,k.__)("Checkout Plugins - Stripe for WooCommerce needs WooCommerce to be active on your store.","checkout-plugins-stripe-woo")),(0,t.createElement)("div",{className:"mt-5 sm:mt-10 sm:flex justify-center"},(0,t.createElement)("div",{className:"rounded-md shadow"},"installing"===e?(0,t.createElement)("button",{className:"disabled w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-normal rounded-md text-white bg-primary-100 hover:bg-cart-700  cursor-wait"},(0,k.__)("Installingâ€¦","checkout-plugins-stripe-woo"),(0,t.createElement)(N,null)):"activating"===e?(0,t.createElement)("button",{className:"disabled w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-normal rounded-md text-white bg-primary-100 hover:bg-cart-700  cursor-wait"},(0,k.__)("Activating, just a momentâ€¦","checkout-plugins-stripe-woo"),(0,t.createElement)(N,null)):(0,t.createElement)("button",{onClick:function(){if(""===onboarding_vars.woocommerce_installed)r("installing"),setTimeout((()=>{o(!0)}),1e4),wp.updates.queue.push({action:"install-plugin",data:{slug:"woocommerce"}}),wp.updates.queueChecker();else{r("activating");const e=new window.FormData;e.append("action","cpsw_onboarding_install_woocommerce"),e.append("security",onboarding_vars.cpsw_onboarding_install_woocommerce),ae()({url:onboarding_vars.ajax_url,method:"POST",body:e}).then((e=>{e.success?window.location.href=onboarding_vars.onboarding_base:l(!0)}))}},className:"install-dependency w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-normal rounded-md text-white bg-primary-100 hover:bg-cart-700 cursor-pointer"},""===onboarding_vars.woocommerce_installed?(0,k.__)("Install and continue","checkout-plugins-stripe-woo"):(0,k.__)("Activate and Proceed","checkout-plugins-stripe-woo"))))),a?(0,t.createElement)("div",{className:"bg-cart-50 p-4 fixed left-0 top-0 right-0 transition ease-in-out delay-150 mt-16"},(0,t.createElement)("div",{className:"block"},(0,t.createElement)("div",{className:"text-center justify-center"},(0,t.createElement)("p",{className:"text-sm mx-auto w-full text-primary-100 text-center"},(0,k.__)("Installing WooCommerce will take time. Please be patient.","checkout-plugins-stripe-woo"))))):"",s?(0,t.createElement)("div",{className:"bg-cart-50 p-4 fixed left-0 top-0 right-0 transition ease-in-out delay-150 mt-16"},(0,t.createElement)("div",{className:"block"},(0,t.createElement)("div",{className:"text-center justify-center"},(0,t.createElement)("p",{className:"text-sm mx-auto w-full text-primary-100 text-center"},(0,k.__)("WooCommerce installing failed. Please try again.","checkout-plugins-stripe-woo"))))):"")},be=function(e){const{previousStep:n,nextStep:r,currentStep:a,maxSteps:o}=e,[{settingsProcess:s}]=C(),l=v();return""===a?null:(0,t.createElement)(t.Fragment,null,(0,t.createElement)("footer",{className:"cpsw-setup-footer w-full fixed inset-x-0 bottom-0 h-[70px] z-10 bg-primary-background"},(0,t.createElement)("div",{className:"flex items-center justify-between sm:w-max gap-8 mx-auto px-7 py-4 h-full"},(0,t.createElement)("div",{className:"cpsw-footer-left-section flex"},(0,t.createElement)("div",{className:"flex-shrink-0 flex text-sm font-normal cursor-pointer "+(""===n?"text-primary-mutedtext pointer-events-none":"text-primary-foregroundBody hover:text-primary-100"),onClick:function(e){e.preventDefault(),l(onboarding_vars.navigator_base+"&cpsw_call="+n)}},(0,t.createElement)("button",{type:"button"},(0,k.__)("Back","checkout-plugins-stripe-woo")))),(0,t.createElement)("div",{className:"cpsw-footer--pagination hidden md:-mt-px md:flex gap-3"},Array(o).fill().map(((e,n)=>(0,t.createElement)("span",{key:n,className:"cpsw-footer-pagination--tab relative z-10 inline-flex items-center rounded-full p-1 text-sm font-semibold text-white focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-500 "+(a===n?"bg-primary-100":"bg-primary-foreground")})))),(0,t.createElement)("div",{className:"cpsw-footer-right-section flex"},(0,t.createElement)("button",{onClick:function(e){e.preventDefault(),l(onboarding_vars.navigator_base+"&cpsw_call="+r)},className:"flex-shrink-0 flex text-sm font-normal cursor-pointer "+(""===r||"processing"===s||"blocked"===s?"disabled pointer-events-none text-primary-mutedtext":"hover:text-primary-100 text-primary-foregroundBody ")},(0,k.__)("Next","checkout-plugins-stripe-woo"))))))},he=(0,n.createContext)(null);function xe(e){var t=e.value,n=e.children;return r().createElement(he.Provider,{value:t},n)}he.displayName="OpenClosedContext",function(e){e[e.Open=0]="Open",e[e.Closed=1]="Closed"}(ue||(ue={})),function(e){e[e.Open=0]="Open",e[e.Closed=1]="Closed"}(pe||(pe={})),function(e){e[e.ToggleDisclosure=0]="ToggleDisclosure",e[e.CloseDisclosure=1]="CloseDisclosure",e[e.SetButtonId=2]="SetButtonId",e[e.SetPanelId=3]="SetPanelId",e[e.LinkPanel=4]="LinkPanel",e[e.UnlinkPanel=5]="UnlinkPanel"}(de||(de={}));var ve=((me={})[de.ToggleDisclosure]=function(e){var t;return D({},e,{disclosureState:B(e.disclosureState,(t={},t[pe.Open]=pe.Closed,t[pe.Closed]=pe.Open,t))})},me[de.CloseDisclosure]=function(e){return e.disclosureState===pe.Closed?e:D({},e,{disclosureState:pe.Closed})},me[de.LinkPanel]=function(e){return!0===e.linkedPanel?e:D({},e,{linkedPanel:!0})},me[de.UnlinkPanel]=function(e){return!1===e.linkedPanel?e:D({},e,{linkedPanel:!1})},me[de.SetButtonId]=function(e,t){return e.buttonId===t.buttonId?e:D({},e,{buttonId:t.buttonId})},me[de.SetPanelId]=function(e,t){return e.panelId===t.panelId?e:D({},e,{panelId:t.panelId})},me),we=(0,n.createContext)(null);function ye(e){var t=(0,n.useContext)(we);if(null===t){var r=new Error("<"+e+" /> is missing a parent <"+Ce.name+" /> component.");throw Error.captureStackTrace&&Error.captureStackTrace(r,ye),r}return t}we.displayName="DisclosureContext";var Ee=(0,n.createContext)(null);function _e(e){var t=(0,n.useContext)(Ee);if(null===t){var r=new Error("<"+e+" /> is missing a parent <"+Ce.name+" /> component.");throw Error.captureStackTrace&&Error.captureStackTrace(r,_e),r}return t}Ee.displayName="DisclosureAPIContext";var ke=(0,n.createContext)(null);function Ne(e,t){return B(t.type,ve,e,t)}ke.displayName="DisclosurePanelContext";var Se=n.Fragment;function Ce(e){var t,a=e.defaultOpen,o=void 0!==a&&a,s=L(e,["defaultOpen"]),l="headlessui-disclosure-button-"+K(),c="headlessui-disclosure-panel-"+K(),i=(0,n.useReducer)(Ne,{disclosureState:o?pe.Open:pe.Closed,linkedPanel:!1,buttonId:l,panelId:c}),u=i[0].disclosureState,m=i[1];(0,n.useEffect)((function(){return m({type:de.SetButtonId,buttonId:l})}),[l,m]),(0,n.useEffect)((function(){return m({type:de.SetPanelId,panelId:c})}),[c,m]);var p=(0,n.useCallback)((function(e){m({type:de.CloseDisclosure});var t=e?e instanceof HTMLElement?e:e.current instanceof HTMLElement?e.current:document.getElementById(l):document.getElementById(l);null==t||t.focus()}),[m,l]),d=(0,n.useMemo)((function(){return{close:p}}),[p]),f=(0,n.useMemo)((function(){return{open:u===pe.Open,close:p}}),[u,p]);return r().createElement(we.Provider,{value:i},r().createElement(Ee.Provider,{value:d},r().createElement(xe,{value:B(u,(t={},t[pe.Open]=ue.Open,t[pe.Closed]=ue.Closed,t))},F({props:s,slot:f,defaultTag:Se,name:"Disclosure"}))))}var Pe=M((function e(t,r){var a=ye([Ce.name,e.name].join(".")),o=a[0],s=a[1],l=(0,n.useRef)(null),c=H(l,r),i=(0,n.useContext)(ke),u=null!==i&&i===o.panelId,m=(0,n.useCallback)((function(e){var t;if(u){if(o.disclosureState===pe.Closed)return;switch(e.key){case T.Space:case T.Enter:e.preventDefault(),e.stopPropagation(),s({type:de.ToggleDisclosure}),null==(t=document.getElementById(o.buttonId))||t.focus()}}else switch(e.key){case T.Space:case T.Enter:e.preventDefault(),e.stopPropagation(),s({type:de.ToggleDisclosure})}}),[s,u,o.disclosureState]),p=(0,n.useCallback)((function(e){e.key===T.Space&&e.preventDefault()}),[]),d=(0,n.useCallback)((function(e){var n;W(e.currentTarget)||t.disabled||(u?(s({type:de.ToggleDisclosure}),null==(n=document.getElementById(o.buttonId))||n.focus()):s({type:de.ToggleDisclosure}))}),[s,t.disabled,o.buttonId,u]),f=(0,n.useMemo)((function(){return{open:o.disclosureState===pe.Open}}),[o]),g=Q(t,l);return F({props:D({},t,u?{ref:c,type:g,onKeyDown:m,onClick:d}:{ref:c,id:o.buttonId,type:g,"aria-expanded":t.disabled?void 0:o.disclosureState===pe.Open,"aria-controls":o.linkedPanel?o.panelId:void 0,onKeyDown:m,onKeyUp:p,onClick:d}),slot:f,defaultTag:"button",name:"Disclosure.Button"})})),je=P.RenderStrategy|P.Static,Te=M((function e(t,a){var o=ye([Ce.name,e.name].join(".")),s=o[0],l=o[1],c=_e([Ce.name,e.name].join(".")).close,i=H(a,(function(){s.linkedPanel||l({type:de.LinkPanel})})),u=(0,n.useContext)(he),m=null!==u?u===ue.Open:s.disclosureState===pe.Open;(0,n.useEffect)((function(){return function(){return l({type:de.UnlinkPanel})}}),[l]),(0,n.useEffect)((function(){var e;s.disclosureState!==pe.Closed||null!=(e=t.unmount)&&!e||l({type:de.UnlinkPanel})}),[s.disclosureState,t.unmount,l]);var p=(0,n.useMemo)((function(){return{open:s.disclosureState===pe.Open,close:c}}),[s,c]),d={ref:i,id:s.panelId},f=t;return r().createElement(ke.Provider,{value:s.panelId},F({props:D({},f,d),slot:p,defaultTag:"div",features:je,visible:m,name:"Disclosure.Panel"}))}));Ce.Button=Pe,Ce.Panel=Te;var Oe=function(e){const{currentStep:n}=e,[{settingsProcess:r}]=C(),[{steps:a}]=C(),o=v(),s=[{name:(0,k.__)("Welcome","checkout-plugins-stripe-woo"),step:1,link:""},{name:(0,k.__)("Webhook","checkout-plugins-stripe-woo"),step:2,link:"webhooks"},{name:(0,k.__)("Connect Gateway","checkout-plugins-stripe-woo"),step:3,link:"success"},{name:(0,k.__)("Express Checkout","checkout-plugins-stripe-woo"),step:4,link:"express-checkout"},{name:(0,k.__)("Done","checkout-plugins-stripe-woo"),step:5,link:"thank-you"}],l=e=>{e.preventDefault();const t=()=>{onboarding_vars.woocommerce_installed&&onboarding_vars.woocommerce_activated?window.location.href=onboarding_vars.settings_url:window.location.href=onboarding_vars.plugins_page_url};if(""===n)return void t();const r=a.find((e=>!1===e.completed)),o=r?r.title:null;ie(o).then((e=>{e.success?t():console.log("Error:",e.message)})).catch((e=>{console.error("Request failed:",e)}))};return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(Ce,{as:"nav",className:"bg-white fixed top-0 w-full z-10 border-b border-slate-200"},(e=>{let{}=e;return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"px-4 sm:px-6 lg:px-8"},(0,t.createElement)("div",{className:"flex h-16 justify-between"},(0,t.createElement)("div",{className:"flex"},(0,t.createElement)("div",{className:"flex flex-shrink-0 items-center"},""===n?(0,t.createElement)("img",{className:"block h-6 w-auto",src:onboarding_vars.assets_url+"images/menu-logo-2.svg",alt:"Checkout plugins"}):(0,t.createElement)("img",{className:"block h-8 w-auto",src:onboarding_vars.assets_url+"images/menu-logo.svg",alt:"Checkout plugins"}))),""!==n&&(0,t.createElement)("div",{className:"md:flex self-center hidden"},s.map(((e,a)=>{const l=n>e.step-1,c=n===e.step-1,i=" "+(c?"bg-primary-100":"bg-[#E2E8F0]"),u=" "+(c?"text-primary-100":"text-primary-mutedtext");let m="";m=c?"bg-primary-100 text-white":l?"bg-primary-mutedtext":"bg-white border border-primary-mutedtext text-primary-mutedtext";const p=l?(0,t.createElement)("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})):e.step;return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"flex items-center cursor-pointer",key:e.id,onClick:()=>{var t;t=e.link,"processing"!==r&&"blocked"!==r&&""!==t&&o(onboarding_vars.navigator_base+"&cpsw_call="+t)}},(0,t.createElement)("div",{className:`w-5 h-5 flex items-center justify-center rounded-full text-xs ${m}`},p),(0,t.createElement)("span",{className:`ml-2 ${u}`},e.name)),a<s.length-1&&(0,t.createElement)("div",{className:`flex-grow h-px lg:w-9 w-4 items-center lg:mx-4 mx-2 my-auto ${i}`}))}))),(0,t.createElement)("div",{className:"flex items-center"},(0,t.createElement)("button",{type:"button",className:"rounded-full bg-white p-1 text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",onClick:l,title:(0,k.__)("Exit setup wizard","checkout-plugins-stripe-woo")},(0,t.createElement)("svg",{width:"22",height:"22",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)("path",{d:"M24 8L8 24",stroke:"#374151",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.createElement)("path",{d:"M8 8L24 24",stroke:"#374151",strokeLinecap:"round",strokeLinejoin:"round"})))))))})))},De=function(e){const[{},r]=C(),[a,o]=(0,n.useState)(!1),[s,l]=(0,n.useState)(!1),[c,i]=(0,n.useState)(null),[u,m]=(0,n.useState)(onboarding_vars.get_payment_mode),p=v();return(0,n.useEffect)((()=>{r({type:"RESET"}),r({type:"UPDATE_STEP",step:0,completed:!0})}),[e.isSyncDone]),(0,t.createElement)("main",{className:"pb-28 mt-24 mx-auto md:w-7/12 sm:w-10/12 w-full px-4 sm:px-6 lg:mt-32 lg:px-8 flex-1"},(0,t.createElement)("div",{className:"text-center max-w-[681px] m-auto"},(0,t.createElement)("span",{className:"text-sm font-medium text-primary-100 text-center block tracking-[.24em] uppercase"},(0,k.__)("Step 2 of 5","checkout-plugins-stripe-woo")),(0,t.createElement)("h1",{className:"mt-8 lg:mt-10 text-2xl font-semibold text-[#020617] sm:text-3xl md:text-4xl"},(0,k.__)("Letâ€™s create a webhook","checkout-plugins-stripe-woo")),(0,t.createElement)("p",{className:"mt-6 text-base justify-center text-primary-200 sm:mt-5 sm:w-full sm:mx-auto md:mt-5 lg:mx-0"},(0,k.__)("The webhook URL is called by Stripe, when events occur in your account, like a source becomes chargeable.","checkout-plugins-stripe-woo")),(0,t.createElement)("div",{className:"sm:inline-block lg:inline-block sm:justify-center lg:justify-center mt-8"},(0,t.createElement)("div",{className:"rounded-md shadow"},a?(0,t.createElement)("button",{className:"disabled w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-normal rounded-md text-white bg-primary-100 hover:bg-cart-700 cursor-wait"},(0,k.__)("Creating Webhookâ€¦","checkout-plugins-stripe-woo"),(0,t.createElement)(N,null)):(0,t.createElement)("button",{onClick:()=>{l(!s)},className:"w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-normal rounded-md text-white bg-primary-100 hover:bg-cart-700 cursor-pointer"},(0,k.__)("Create Webhook","checkout-plugins-stripe-woo"))),(0,t.createElement)("div",{className:"mt-8"},(0,t.createElement)("a",{href:onboarding_vars.base_url+"&cpsw_call=success",className:"w-full text-center text-base font-normal text-primary-mutedtext "},(0,k.__)("Skip this step","checkout-plugins-stripe-woo"))))),s&&(0,t.createElement)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-75 z-20"},(0,t.createElement)("div",{className:"bg-white rounded-lg shadow-lg p-8 m-4 max-h-full text-center lg:w-[38%] md:w-8/12 w-11/12 relative"},(0,t.createElement)("button",{type:"button",className:"rounded-full bg-white p-1 text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 absolute right-3 top-3",onClick:()=>l(!1)},(0,t.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)("path",{d:"M24 8L8 24",stroke:"#374151",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.createElement)("path",{d:"M8 8L24 24",stroke:"#374151",strokeLinecap:"round",strokeLinejoin:"round"}))),(0,t.createElement)("h2",{className:"mb-5 text-lg font-semibold text-[#020617] text-left"},(0,k.__)("Enable webhook","checkout-plugins-stripe-woo")),(0,t.createElement)("div",{className:"mb-5 text-left"},(0,t.createElement)("label",{className:" text-gray-700 font-medium text-sm mb-1 block",htmlFor:"cpsw-webhook-url"},(0,k.__)("Webhook URL","checkout-plugins-stripe-woo")),(0,t.createElement)("div",{className:"flex border border-[#CBD5E1] rounded-lg px-[14px] "},(0,t.createElement)("input",{id:"cpsw-webhook-url",type:"text",className:"flex-grow py-[10px] !bg-transparent !border-0 !border-r focus:!bottom-0 focus:!shadow-none border-[#CBD5E1]",value:onboarding_vars.webhook_url,readOnly:!0}),(0,t.createElement)("button",{className:" pl-4 py-[10px] rounded-r-md",onClick:()=>{var e;const t=document.getElementById("cpsw-webhook-url").value;var n;"undefined"!=typeof navigator&&null!==(e=navigator)&&void 0!==e&&e.clipboard&&(null===(n=navigator)||void 0===n||n.clipboard.writeText(t).catch((e=>{console.error("Failed to copy: ",e)})))}},(0,t.createElement)("svg",{className:"h-5 w-5 text-primary-foregroundBody",width:"24",height:"24",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},"  ",(0,t.createElement)("path",{stroke:"none",d:"M0 0h24v24H0z"}),"  ",(0,t.createElement)("rect",{x:"8",y:"8",width:"12",height:"12",rx:"2"}),"  ",(0,t.createElement)("path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"}))))),(0,t.createElement)("div",{className:"mb-8 text-left"},(0,t.createElement)("label",{className:" text-gray-700 font-medium text-sm mb-1 block",htmlFor:"mode"},(0,k.__)("Select Mode","checkout-plugins-stripe-woo")),(0,t.createElement)("div",{className:"flex w-full items-center bg-[#F1F5F9] text-black rounded-md p-[5px]"},(0,t.createElement)("button",{onClick:()=>m("test"),className:"px-3 py-[6px] rounded-[4px] w-6/12 text-sm font-medium  "+("test"===u?"bg-white text-primary-100":"bg-transparent text-[#1E293B]")},(0,k.__)("Test","checkout-plugins-stripe-woo")),(0,t.createElement)("button",{onClick:()=>m("live"),className:"px-3 py-[6px] rounded-[4px] w-6/12 text-sm font-medium  "+("live"===u?"bg-white text-primary-100":"bg-transparent text-[#1E293B]")},(0,k.__)("Live","checkout-plugins-stripe-woo")))),(0,t.createElement)("div",{className:"flex space-x-3"},(0,t.createElement)("div",{className:"w-6/12"},(0,t.createElement)("button",{className:"w-full flex items-center justify-center px-6 py-3 border border-[#CBD5E1] text-base font-normal rounded-md text-[#1E293B] cursor-pointer",onClick:()=>l(!1)},(0,k.__)("Cancel","checkout-plugins-stripe-woo"))),(0,t.createElement)("div",{className:"w-6/12"},a?(0,t.createElement)("button",{className:"disabled w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-normal rounded-md text-white bg-primary-100 hover:bg-cart-700 cursor-wait"},(0,k.__)("Savingâ€¦","checkout-plugins-stripe-woo"),(0,t.createElement)(N,null)):(0,t.createElement)("button",{onClick:()=>{r({type:"PROCESSING"});const e=new window.FormData;e.append("action","cpsw_onboarding_enable_webhooks"),i(null),o(!0),e.append("cpsw_mode",u),e.append("security",onboarding_vars.cpsw_onboarding_enable_webhooks),ae()({url:onboarding_vars.ajax_url,method:"POST",body:e}).then((e=>{var t;r({type:"RESET"}),e.success?(r({type:"UPDATE_STEP",step:1,completed:!0}),p(onboarding_vars.navigator_base+"&cpsw_call=success")):(i(null==e||null===(t=e.data)||void 0===t?void 0:t.message),o(!1))}))},className:"w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-normal rounded-md text-white bg-primary-100 hover:bg-cart-700 cursor-pointer"},(0,k.__)("Save","checkout-plugins-stripe-woo")))),c&&(0,t.createElement)("p",{className:"text-red-600 text-xs mt-4 text-left"},c))))};o().render((0,t.createElement)((e=>{let{reducer:r,initialState:a,children:o}=e;return(0,t.createElement)(S.Provider,{value:(0,n.useReducer)(r,a)},o)}),{initialState:{settingsProcess:!1,steps:[{id:0,title:"welcome",completed:!1},{id:1,title:"webhooks",completed:!1},{id:2,title:"success",completed:!1},{id:3,title:"express-checkout",completed:!1},{id:4,title:"thank-you",completed:!1}]},reducer:(e,t)=>{switch(t.type){case"BLOCKED":return{...e,settingsProcess:"blocked"};case"PROCESSING":return{...e,settingsProcess:"processing"};case"RESET":return{...e,settingsProcess:!1};case"UPDATE_STEP":return{...e,steps:e.steps.map((e=>e.id===t.step?{...e,completed:t.completed}:e))};case"SYNC_STEPS_WITH_DATABASE":return{...e,steps:t.steps};default:return e}}},(0,t.createElement)((function(e){let{basename:t,children:r,window:a}=e,o=(0,n.useRef)();null==o.current&&(o.current=function(e){function t(){var e=c.location,t=p.state||{};return[t.idx,{pathname:e.pathname,search:e.search,hash:e.hash,state:t.usr||null,key:t.key||"default"}]}function n(e){return"string"==typeof e?e:function(e){var t=e.pathname;t=void 0===t?"/":t;var n=e.search;return n=void 0===n?"":n,e=void 0===(e=e.hash)?"":e,n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),e&&"#"!==e&&(t+="#"===e.charAt(0)?e:"#"+e),t}(e)}function r(e,t){return void 0===t&&(t=null),s({pathname:b.pathname,hash:"",search:""},"string"==typeof e?m(e):e,{state:t,key:Math.random().toString(36).substr(2,8)})}function a(e){f=e,e=t(),g=e[0],b=e[1],h.call({action:f,location:b})}function o(e){p.go(e)}void 0===e&&(e={});var c=void 0===(e=e.window)?document.defaultView:e,p=c.history,d=null;c.addEventListener("popstate",(function(){if(d)x.call(d),d=null;else{var e=l.Pop,n=t(),r=n[0];if(n=n[1],x.length){if(null!=r){var s=g-r;s&&(d={action:e,location:n,retry:function(){o(-1*s)}},o(s))}}else a(e)}}));var f=l.Pop,g=(e=t())[0],b=e[1],h=u(),x=u();return null==g&&(g=0,p.replaceState(s({},p.state,{idx:g}),"")),{get action(){return f},get location(){return b},createHref:n,push:function e(t,o){var s=l.Push,i=r(t,o);if(!x.length||(x.call({action:s,location:i,retry:function(){e(t,o)}}),0)){var u=[{usr:i.state,key:i.key,idx:g+1},n(i)];i=u[0],u=u[1];try{p.pushState(i,"",u)}catch(e){c.location.assign(u)}a(s)}},replace:function e(t,o){var s=l.Replace,c=r(t,o);x.length&&(x.call({action:s,location:c,retry:function(){e(t,o)}}),1)||(c=[{usr:c.state,key:c.key,idx:g},n(c)],p.replaceState(c[0],"",c[1]),a(s))},go:o,back:function(){o(-1)},forward:function(){o(1)},listen:function(e){return h.push(e)},block:function(e){var t=x.push(e);return 1===x.length&&c.addEventListener("beforeunload",i),function(){t(),x.length||c.removeEventListener("beforeunload",i)}}}}({window:a}));let c=o.current,[p,d]=(0,n.useState)({action:c.action,location:c.location});return(0,n.useLayoutEffect)((()=>c.listen(d)),[c]),(0,n.createElement)(b,{basename:t,children:r,location:p.location,navigationType:p.action,navigator:c})}),null,(0,t.createElement)((function(){const[e,r]=(0,n.useState)(!1),a=new URLSearchParams(x().search).get("cpsw_call");let o="",s="",l="",c=(0,t.createElement)("p",null);switch(a){case"setup-woocommerce":c=(0,t.createElement)(ge,null);break;case"failed":c=(0,t.createElement)(ce,null);break;case"thank-you":c=(0,t.createElement)(fe,null),o="express-checkout",l=4;break;case"express-checkout":c=(0,t.createElement)(le,null),o="success",s="thank-you",l=3;break;case"success":c=(0,t.createElement)(se,null),s="express-checkout",o="webhooks",l=2;break;case"webhooks":c=(0,t.createElement)(De,{isSyncDone:e}),s="success",l=1;break;default:c=(0,t.createElement)(O,null),l=0}const[{steps:i},u]=C();return(0,n.useEffect)((()=>{const e=onboarding_vars.incomplete_step,t=i.every((e=>!e.completed));if(e&&t){const t=i.find((t=>t.title===e)),n=i.map((e=>e.id<t.id?{...e,completed:!0}:e));u({type:"SYNC_STEPS_WITH_DATABASE",steps:n}),r(!0)}}),[]),(0,t.createElement)("div",{className:"relative h-full bg-primary-background my-0 rounded-xl"},(0,t.createElement)("div",{className:"mx-auto overflow-x-hidden"},(0,t.createElement)("div",{className:"relative z-10 lg:w-full flex-col flex h-full"},(0,t.createElement)(Oe,{currentStep:l}),c,(0,t.createElement)(be,{previousStep:o,nextStep:s,currentStep:l,maxSteps:5}))))}),null))),document.getElementById("cpsw-onboarding-content"))}();